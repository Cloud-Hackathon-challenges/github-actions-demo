services:
  mongodb:
    image: team1acrmanual9.azurecr.io/mongo:5
    container_name: mongodb
    restart: always

  mongo-seed:
    image: team1acrmanual9.azurecr.io/db-seed:webapp
    depends_on:
      - mongodb

  api:
    image: team1acrmanual9.azurecr.io/api:latest
    ports:
      - "4000:4000"
    environment:
      PORT: 4000
      MONGO_URI: mongodb://mongodb:27017/dobook
    depends_on:
      - mongodb

  frontend:
    image: team1acrmanual9.azurecr.io/frontend:latest
    ports:
      - "80:80"
    environment:
      API_HOST: api
      API_PORT: 4000
    depends_on:
      - api
